<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>ëª¬í‹°í™€ ë¬¸ì œ</title>
    <!-- MathJax for math equations -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        h1 {
            font-size: 2.5rem; /* ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ ê°€ëŠ¥ (ì˜ˆ: 2rem, 3rem ë“±) */
        }
        h2 {
            font-size: 2rem;
        }
        h3 {
            font-size: 2.5rem;
        }
        h4 { /* ë³¸ë¬¸ í¬ê¸° */
            font-size: 1.2rem;
        }
        .door-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 50px 0;
        }
        .door {
            width: 200px;
            height: 300px;
            border: 5px solid #333;
            border-radius: 10px;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: #FFD700;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        .door:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }
        .door.selected {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        .door.revealed {
            background: linear-gradient(135deg, #90EE90 0%, #98FB98 100%);
            cursor: not-allowed;
        }
        .door.revealed::after {
            content: 'ğŸ';
            font-size: 80px;
        }
        .door.win {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .door.win::after {
            content: 'ğŸš—';
            font-size: 80px;
        }
        .door.lose {
            background: linear-gradient(135deg, #90EE90 0%, #98FB98 100%);
        }
        .door.lose::after {
            content: 'ğŸ';
            font-size: 80px;
        }
        .door-number {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: white;
            font-weight: bold;
        }
        .instruction-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 30px auto;
            max-width: 800px;
            border-radius: 5px;
        }
        .result-box {
            margin: 30px auto;
            max-width: 600px;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
        .result-box.win {
            background: #d4edda;
            border: 2px solid #28a745;
        }
        .result-box.lose {
            background: #f8d7da;
            border: 2px solid #dc3545;
        }
        .decision-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        .btn-decision {
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
        }
        .stats-box {
            background: #e9ecef;
            border: 2px solid #6c757d;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
        }
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .stat-item:last-child {
            border-bottom: none;
        }
        .stat-label {
            font-weight: bold;
            font-size: 18px;
        }
        .stat-value {
            font-size: 20px;
            color: #007bff;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">ğŸšª ëª¬í‹°í™€ ë¬¸ì œ ğŸšª</h1>
        <h4>ì—¬ê¸° ì„¸ ê°œì˜ ë¬¸ì´ ìˆìŠµë‹ˆë‹¤.</h4>
        <h4>í•œ ë¬¸ ë’¤ì—ëŠ” ì•„ì£¼ ë¹„ì‹¼ ìë™ì°¨ê°€ ìˆê³ , ë‚˜ë¨¸ì§€ ë‘ ë¬¸ ë’¤ì—ëŠ” ì•„ë¬´ì§ì— ì“¸ëª¨ ì—†ëŠ” ì—¼ì†Œê°€ ìˆìŠµë‹ˆë‹¤.</h4>
        <h4>í˜¸ìŠ¤íŠ¸ê°€ ë‹¹ì‹ ì´ ì„ íƒí•˜ì§€ ì•Šì€ ë¬¸ ì¤‘ í•˜ë‚˜ë¥¼ ì—´ì–´ ì—¼ì†Œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</h4>
        <h4>ì´ì œ ì„ íƒì„ ë°”ê¾¸ì‹œê² ìŠµë‹ˆê¹Œ? ì•„ë‹ˆë©´ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h4>
        <h4>ì—¬ëŸ¬ë²ˆ(10ë²ˆ ì´ìƒ) ì²´í—˜ì„ í•´ë³´ê³  ë„˜ì–´ê°€ì‹œëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</h4>
        <div style="height: 5rem;"></div>

        {% if session.get('game_state') == 'initial' or not session.get('game_state') %}
        <div class="text-center mb-4">
            <h3>ë¬¸ì„ ì„ íƒí•˜ì„¸ìš”!</h3>
        </div>
        {% elif session.get('game_state') == 'revealed' %}
        <div class="text-center mb-4">
            <h3>í˜¸ìŠ¤íŠ¸ê°€ {{ session.get('revealed_door') }}ë²ˆ ë¬¸ì„ ì—´ì—ˆìŠµë‹ˆë‹¤. ì—¼ì†Œê°€ ìˆë„¤ìš”!</h3>
            <p>ì„ íƒì„ ë°”ê¾¸ì‹œê² ìŠµë‹ˆê¹Œ?</p>
        </div>
        {% elif session.get('game_state') == 'finished' %}
        <div class="result-box {{ session.get('result') }}">
            {% if session.get('result') == 'win' %}
            <h2>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì´ ì´ê²¼ìŠµë‹ˆë‹¤! ğŸ‰</h2>
            <p class="lead">ìë™ì°¨ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!</p>
            {% else %}
            <h2>ğŸ˜¢ ì•„ì‰½ë„¤ìš”... ì—¼ì†Œë¥¼ ì„ íƒí•˜ì…¨ìŠµë‹ˆë‹¤.</h2>
            <p class="lead">ë‹¤ìŒ ê¸°íšŒì— ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!</p>
            {% endif %}
            <p class="mt-3">ì°¨ëŠ” {{ session.get('car_door') }}ë²ˆ ë¬¸ ë’¤ì— ìˆì—ˆìŠµë‹ˆë‹¤.</p>
            <a href="/reset" class="btn btn-primary btn-lg mt-3">ë‹¤ì‹œ í”Œë ˆì´</a>
        </div>
        {% endif %}

        <div class="door-container">
            {% for door_num in [1, 2, 3] %}
            <div class="door 
                {% if session.get('game_state') == 'revealed' and door_num == session.get('revealed_door') %}revealed
                {% elif session.get('game_state') == 'finished' and door_num == session.get('car_door') %}win
                {% elif session.get('game_state') == 'finished' and door_num != session.get('car_door') and door_num != session.get('revealed_door') %}lose
                {% elif session.get('player_choice') == door_num %}selected
                {% endif %}"
                {% if session.get('game_state') == 'initial' or not session.get('game_state') %}
                onclick="window.location.href='/select_door/{{ door_num }}'"
                {% endif %}>
                <div class="door-number">{{ door_num }}</div>
                {% if (session.get('game_state') == 'initial' or not session.get('game_state')) or (session.get('game_state') == 'revealed' and door_num != session.get('revealed_door') and door_num != session.get('player_choice')) %}
                ğŸšª
                {% endif %}
            </div>
            {% endfor %}
        </div>

        {% if session.get('game_state') == 'revealed' %}
        <div class="decision-buttons">
            <a href="/final_decision/stay" class="btn btn-warning btn-decision">ìœ ì§€í•˜ê¸°</a>
            <a href="/final_decision/switch" class="btn btn-success btn-decision">ë°”ê¾¸ê¸°</a>
        </div>
        {% endif %}

        {% if session.get('game_state') == 'initial' or not session.get('game_state') %}
        <div class="text-center mt-4">
            <p class="text-muted">ìœ„ì˜ ë¬¸ ì¤‘ í•˜ë‚˜ë¥¼ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</p>
        </div>
        {% endif %}
    </div>

    <div class="container mt-5">
        <h4>í˜¸ìŠ¤íŠ¸ê°€ ë¬¸ì„ ì—´ì–´ì£¼ë©´ ë§ì€ ìƒê°ì´ ë“¤ê²ë‹ˆë‹¤.</h4>
        <h4>ë°”ê¾¸ëŠ” ê²ƒì´ ë‚˜ì„ê¹Œ, ì•„ë‹ˆë©´ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ë‚˜ì„ê¹Œ?</h4>
        <h4>ë°”ê¾¸ì—ˆëŠ”ë° ì›ë˜ ê³ ë¥¸ ê³³ì— ìˆìœ¼ë©´ ì–µìš¸í•˜ê³  ê·¸ë ‡ë‹¤ê³  ê°€ë§Œíˆ ìˆì„ ì´ìœ ë„ ì—†ìŠµë‹ˆë‹¤.</h4>
        <h4>í•˜ì§€ë§Œ í™•ë¥ ì ìœ¼ë¡œ ë”°ì§€ë©´ ë°”ê¾¸ëŠ” ê²ƒì´ ë”ìš± ìœ ë¦¬í•©ë‹ˆë‹¤.</h4>
        <h4>ì™œ ê·¸ëŸ´ê¹Œìš”?</h4>
        <div style="height: 1.5rem;"></div>
        <h4>ì¼ë‹¨ ë‹¹ì‹ ì´ í”Œë ˆì´í•œ ê¸°ë¡ìœ¼ë¡œ í•œë²ˆ ë³¼ê¹Œìš”?</h4>
        <div style="height: 7rem;"></div>
    </div>

    <div class="stats-box">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">í†µê³„</h4>
            <a href="/reset_stats" class="btn btn-sm btn-outline-secondary">í†µê³„ ì´ˆê¸°í™”</a>
        </div>
        <div class="stat-item">
            <span class="stat-label">ë°”ê¿¨ì„ ë•Œ ìŠ¹ë¦¬:</span>
            <span class="stat-value">
            {% set switch_win = session.get('switch_win', 0) %}
            {% set switch_total = session.get('switch_total', 0) %}
            {{ switch_win }} / {{ switch_total }}
            {% if switch_total > 0 %}
            ({{ ((switch_win / switch_total) * 100)|round(1) }}%)
            {% else %}
            (0%)
            {% endif %}
            </span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ìœ ì§€í–ˆì„ ë•Œ ìŠ¹ë¦¬:</span>
            <span class="stat-value">
            {% set stay_win = session.get('stay_win', 0) %}
            {% set stay_total = session.get('stay_total', 0) %}
            {{ stay_win }} / {{ stay_total }}
            {% if stay_total > 0 %}
            ({{ ((stay_win / stay_total) * 100)|round(1) }}%)
            {% else %}
            (0%)
            {% endif %}
            </span>
        </div>
    </div>
    
    <div class="container mt-5">
        <h4>í†µê³„ì—ì„œ ì„ íƒì„ ë°”ê¿¨ì„ ë•Œ ë” ë§ì´ ë§ì¶˜ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆì„ ê²ë‹ˆë‹¤.</h4>
        <h4>ì™œ ì €ëŠ” ì´ë ‡ê²Œ í™•ì‹ í•  ìˆ˜ ìˆì—ˆì„ê¹Œìš”? ì‹ ê¸°í•˜ê²Œë„ ë‘ ë¬¸ì˜ í™•ë¥ ì´ 1/3ìœ¼ë¡œ ë™ì¼í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h4>
        <h4>ì§€ê¸ˆë¶€í„° ê·¸ ì´ìœ ë¥¼ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</h4>
        <div style="height: 10rem;"></div>

        <img src="{{ url_for('static', filename='bayes.jpg') }}" alt="ì„¤ëª…" style="max-width: 100%;">
        <h4>$P(B|A)$ëŠ” ì‚¬ê±´ $A$ê°€ ê´€ì°°ë˜ì—ˆë‹¤ëŠ” ê°€ì •í•˜ì— ì‚¬ê±´ $B$ê°€ ì¼ì–´ë‚  í™•ë¥ ì…ë‹ˆë‹¤.</h4>
        <h4>$P(B)$ëŠ” ì•„ë¬´ëŸ° ì •ë³´ê°€ ì—†ì„ ë•Œ ì‚¬ê±´ $B$ê°€ ì¼ì–´ë‚  í™•ë¥ ì…ë‹ˆë‹¤.</h4>
        <h4>$P(A|B)$ëŠ” ì‚¬ê±´ $B$ê°€ ê´€ì°°ë˜ì—ˆë‹¤ëŠ” ê°€ì •í•˜ì— ì‚¬ê±´ $A$ê°€ ì¼ì–´ë‚  í™•ë¥ ì…ë‹ˆë‹¤.</h4>
        <h4>$P(A)$ëŠ” ì¦ê±° $A$ê°€ ì¼ì–´ë‚  í™•ë¥ ì…ë‹ˆë‹¤. ì´ëŠ” $B$ê°€ ì¼ì–´ë‚˜ë“  ì•ˆ ì¼ì–´ë‚˜ë“  ì¡´ì¬í•©ë‹ˆë‹¤.</h4>
        <div style="height: 1.5rem;"></div>

        <h4>ì´ê²ƒì„ ëª¬í‹°í™€ ë¬¸ì œì— ì ìš©í•´ ë´…ì‹œë‹¤.</h4>
        <h4>ë¨¼ì € ì‚¬ê±´ì„ ì •ì˜í•´ë´…ì‹œë‹¤.</h4>
        <h4>$C_n$ì€ në²ˆì§¸ ë¬¸ì— ìë™ì°¨ê°€ ìˆëŠ” ì‚¬ê±´ì…ë‹ˆë‹¤.</h4>
        <h4>$H_n$ì€ í˜¸ìŠ¤íŠ¸ê°€ në²ˆì§¸ ë¬¸ì„ ì—´ì–´ ì—¼ì†Œë¥¼ ë³´ì—¬ì£¼ëŠ” ì¦ê±° ì‚¬ê±´ì…ë‹ˆë‹¤.</h4>
        <h4>ë¨¼ì € ë‹¹ì‹ ì€ 1ë²ˆ ë¬¸ì„ ì„ íƒí–ˆë‹¤ê³  ê°€ì •í•˜ê³ , ì‚¬íšŒìê°€ 3ë²ˆ ë¬¸ì„ ì—´ì–´ ì—¼ì†Œë¥¼ ë³´ì—¬ì£¼ì—ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.</h4>
        <h4>ìš°ë¦¬ëŠ” $H_3$ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ìœ ì§€í•˜ëŠ”ê²Œ($P(C_1|H_3)$) ë‚˜ì€ì§€ ì•„ë‹ˆë©´ 2ë²ˆ ë¬¸ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²Œ($P(C_2|H_3)$) ë‚˜ì€ì§€ ì•Œê³  ì‹¶ìŠµë‹ˆë‹¤.</h4>
        <h4>ë² ì´ì¦ˆ ì •ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´:</h4>
        <h4>$$P(C_2 | H_3) = \frac{P(H_3 | C_2) \cdot P(C_2)}{P(H_3)}$$</h4>
        <h4>ì‚¬ì „ í™•ë¥  ($P(C_2)$): ì‚¬íšŒìê°€ ë¬¸ì„ ì—´ê¸° ì „, ìë™ì°¨ê°€ 2ë²ˆ ë¬¸ ë’¤ì— ìˆì„ ì´ˆê¸° í™•ë¥ ì…ë‹ˆë‹¤.</h4>
        <h4>$${P(C_2)} = 1/3$$</h4>
        <h4></h4>
        <h4>$P(H_3 | C_2)$: $C_2$ì¼ ê²½ìš° (ìë™ì°¨ëŠ” 2ë²ˆ ë¬¸ ë’¤ì— ìˆì„ ê²½ìš°) ì‚¬íšŒìê°€ 3ë²ˆ ë¬¸ì„ ì—´ í™•ë¥ ì…ë‹ˆë‹¤.ì´ë•Œ ì‚¬íšŒìëŠ” 1ë²ˆ ë¬¸(ë‹¹ì‹ ì˜ ì„ íƒ)ì„ ì—´ ìˆ˜ ì—†ê³ , 2ë²ˆ ë¬¸(ìë™ì°¨)ì„ ì—´ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë°˜ë“œì‹œ 3ë²ˆ ë¬¸ì„ ì—´ì–´ì•¼ í•©ë‹ˆë‹¤.$$P(H_3 | C_2) = 1$$</h4>
        <h4></h4>
        <h4>ì¦ê±°ì˜ í™•ë¥  ($P(H_3)$): ì‚¬íšŒìê°€ 3ë²ˆ ë¬¸ì„ ì—´ ì „ì²´ í™•ë¥ ì…ë‹ˆë‹¤. ì´ë•Œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤.</h4>
        <h4>$$P(H_3) = P(H_3 | C_1)P(C_1) + P(H_3 | C_2)P(C_2) + P(H_3 | C_3)P(C_3)$$</h4>
        <h4>$P(H_3 | C_1)$: ìë™ì°¨ê°€ 1ë²ˆ ë¬¸ì— ìˆì„ ê²½ìš°, ì‚¬íšŒìëŠ” 2ë²ˆ ë˜ëŠ” 3ë²ˆ ë¬¸(ì—¼ì†Œ) ì¤‘ í•˜ë‚˜ë¥¼ 1/2 í™•ë¥ ë¡œ ì—½ë‹ˆë‹¤. $\rightarrow P(H_3 | C_1) = 1/2$</h4>
        <h4>$P(H_3 | C_2)$: ìë™ì°¨ê°€ 2ë²ˆ ë¬¸ì— ìˆì„ ê²½ìš°, ì‚¬íšŒìëŠ” ë°˜ë“œì‹œ 3ë²ˆ ë¬¸ì„ ì—½ë‹ˆë‹¤. $\rightarrow P(H_3 | C_2) = 1$</h4>
        <h4>$P(H_3 | C_3)$: ìë™ì°¨ê°€ 3ë²ˆ ë¬¸ì— ìˆì„ ê²½ìš°, ì‚¬íšŒìëŠ” ìë™ì°¨ê°€ ìˆëŠ” ë¬¸ì„ ì—´ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì ˆëŒ€ 3ë²ˆ ë¬¸ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. $\rightarrow P(H_3 | C_3) = 0$</h4>
        <h4>$$P(H_3) = (1/2) \cdot (1/3) + (1) \cdot (1/3) + (0) \cdot (1/3) = 1/6 + 2/6 = 3/6 = 1/2$$</h4>
        
        <div style="height: 5rem;"></div>
        <h4>ì´ì œ ëª¨ë“  ê°’ì„ ëŒ€ì…í•©ë‹ˆë‹¤.$$P(C_2 | H_3) = \frac{P(H_3 | C_2) \cdot P(C_2)}{P(H_3)} = \frac{1 \cdot (1/3)}{1/2} = \frac{1/3}{1/2} = \mathbf{2/3}$$</h4>
        <h4></h4>
        <h4>$H_3$ì´ë©´ $C_1$ í˜¹ì€ $C_2$ì´ë¯€ë¡œ $P(C_1 | H_3)=1-P(C_2 | H_3)=\mathbf{1/3}$</h4>
        <h4></h4>
        <h4>ë² ì´ì¦ˆ ì •ë¦¬ë¥¼ í†µí•´ ì„ íƒì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì„ íƒì„ ìœ ì§€í•˜ëŠ” ê²ƒë³´ë‹¤ ìŠ¹ë¥ ì´ 2ë°° ë†’ë‹¤ëŠ” ì‚¬ì‹¤ì´ ëª…í™•í•˜ê²Œ ì¦ëª…ë©ë‹ˆë‹¤. ì§ê´€ì€ ì„¸ ë¬¸ ì¤‘ í•˜ë‚˜ê°€ ì—†ì–´ì¡Œìœ¼ë‹ˆ $1/2$ì´ë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì‚¬íšŒìì˜ ì˜ë„ì ì¸ í–‰ë™($P(H_3|C_2)=1$)ì´ í™•ë¥ ì„ 2ë²ˆ ë¬¸ìœ¼ë¡œ ëª°ì•„ì£¼ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
        <h4></h4>
    </div>
    
    
    <div style="height: 13rem;"></div>

</body>
</html>